# ==========================================
# SCENARIO 3: Hybrid Testing
# Local Input → Blob Artifacts
# ==========================================
# Use for: Testing locally but storing artifacts in blob
# Read from: Local filesystem
# Store to: Azure Blob Storage OUTPUT containers
# ==========================================

# ==========================================
# Azure Service Principal Credentials
# ==========================================
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here

# ==========================================
# Key Vault Configuration (Optional)
# ==========================================
KEY_VAULT_URI=https://your-keyvault.vault.azure.net/

# ==========================================
# Document Intelligence
# ==========================================
AZURE_DOC_INT_ENDPOINT=https://your-di.cognitiveservices.azure.com/
AZURE_DOC_INT_KEY=your-di-key-here
AZURE_DI_MAX_CONCURRENCY=4

# ==========================================
# Azure AI Search
# ==========================================
AZURE_SEARCH_SERVICE=your-search-service
AZURE_SEARCH_KEY=your-search-key-here
AZURE_SEARCH_INDEX=your-test-index

# ==========================================
# Azure OpenAI
# ==========================================
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.com/
AZURE_OPENAI_KEY=your-openai-key-here
AZURE_OPENAI_API_KEY=your-openai-key-here
AZURE_OPENAI_API_VERSION=2024-12-01-preview
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
AZURE_OPENAI_EMBEDDING_NAME=text-embedding-ada-002
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_MODEL_NAME=gpt-4o-mini
AZURE_OPENAI_MODEL=gpt-4o-mini

# Concurrency and retries
AZURE_OPENAI_MAX_CONCURRENCY=5
AZURE_OPENAI_MAX_RETRIES=3

# ==========================================
# Azure Storage Account
# ==========================================
AZURE_STORAGE_ACCOUNT=your-storage-account
AZURE_STORAGE_ACCOUNT_KEY=your-storage-key-here
AZURE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your-storage-account;AccountKey=your-storage-key-here;EndpointSuffix=core.windows.net

# ==========================================
# SCENARIO 3: Local Input → Blob Artifacts
# ==========================================
AZURE_INPUT_MODE=local
AZURE_LOCAL_GLOB=./test_data/**/*.pdf

# Force blob storage for artifacts (override default local storage)
AZURE_STORE_ARTIFACTS_TO_BLOB=true

# Or use explicit mode:
# AZURE_ARTIFACTS_MODE=blob

# OPTION 1: Simple configuration using base container name
# Auto-generates: {AZURE_STORAGE_CONTAINER}-pages, -chunks, -images, -citations
AZURE_STORAGE_CONTAINER=test-documents

# OPTION 2: Explicit output container names (overrides auto-generation)
# Uncomment if you want explicit control:
# AZURE_BLOB_CONTAINER_PREFIX=test-documents
# AZURE_BLOB_CONTAINER_OUT_PAGES=pages
# AZURE_BLOB_CONTAINER_OUT_CHUNKS=chunks
# AZURE_BLOB_CONTAINER_OUT_IMAGES=images
# AZURE_BLOB_CONTAINER_CITATIONS=citations

# IMPORTANT: Do NOT set AZURE_ARTIFACTS_DIR when using blob storage!
# AZURE_ARTIFACTS_DIR would override and force LOCAL storage

# ==========================================
# Document Action Mode
# ==========================================
AZURE_DOCUMENT_ACTION=add
# Options: add, remove, removeall

# ==========================================
# Document Intelligence Extraction
# ==========================================
# Testing: Use production-like settings
EXTRACTION_METHOD=layout_then_ocr

# DI batch settings
DI_BATCH_SIZE=16
DI_MAX_RETRIES=3

# ==========================================
# PDF Processing
# ==========================================
# Test page splitting to validate production behavior
SPLIT_PDF_BY_PAGE=true
# Set to true to test page-level citation behavior

# ==========================================
# Chunking Configuration
# ==========================================
# Test with production settings
CHUNKER_TARGET_TOKEN_COUNT=8100

# Standard overlap
CHUNKER_OVERLAP_TOKEN_COUNT=100

# Token-only chunking
CHUNKER_DISABLE_CHAR_LIMIT=true

# Cross-page overlap
CHUNKER_CROSS_PAGE_OVERLAP=true

# ==========================================
# Table Processing
# ==========================================
# Test both markdown and html modes
TABLE_RENDER_MODE=markdown
# Switch to html to test complex table handling

# Table summaries (disable for cost during testing)
TABLE_SUMMARIES=false

# ==========================================
# Figure/Image Processing
# ==========================================
# Testing: Use GPT-4o-mini for cost efficiency
MEDIA_DESCRIBER_MODE=gpt4o
# Use gpt4o for production-like testing
# Use none for faster/cheaper testing

# ==========================================
# Processing Options
# ==========================================
AZURE_USE_INTEGRATED_VECTORIZATION=true

# ==========================================
# Performance Tuning
# ==========================================
AZURE_MAX_WORKERS=4
AZURE_INNER_ANALYZE_WORKERS=1
AZURE_UPLOAD_DELAY=0.2
AZURE_EMBED_BATCH_SIZE=128
AZURE_UPLOAD_BATCH_SIZE=500

# ==========================================
# Office Document Processing
# SCENARIO: Hybrid Mode with Fallback (RECOMMENDED)
# ==========================================
AZURE_OFFICE_EXTRACTOR_MODE=hybrid
AZURE_OFFICE_OFFLINE_FALLBACK=true
AZURE_OFFICE_MAX_FILE_SIZE_MB=100
AZURE_OFFICE_EQUATION_EXTRACTION=true
AZURE_OFFICE_VERBOSE=true

# Optional: LibreOffice for DOC files
# AZURE_OFFICE_LIBREOFFICE_PATH=/usr/bin/soffice  # Linux/Mac
# AZURE_OFFICE_LIBREOFFICE_PATH=C:\\Program Files\\LibreOffice\\program\\soffice.exe  # Windows

# ==========================================
# TO USE THIS FILE:
# cp envs/env.scenario3-local-to-blob.example .env
# Then edit .env with your real credentials
# ==========================================
