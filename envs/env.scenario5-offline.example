# ==========================================
# SCENARIO 5: Fully Offline / Air-Gapped
# Local Input → Local Artifacts (No Azure Services)
# ==========================================
# Use for: Air-gapped environments, offline development, cost optimization
# Read from: Local filesystem
# Store to: Local disk
# Requirements: NO Azure services, LibreOffice for Office docs
# ==========================================

# ==========================================
# Azure Service Principal Credentials
# NOT USED in offline mode, but keep for compatibility
# ==========================================
AZURE_TENANT_ID=not-used-offline
AZURE_CLIENT_ID=not-used-offline
AZURE_CLIENT_SECRET=not-used-offline

# ==========================================
# Key Vault Configuration
# NOT USED in offline mode
# ==========================================
# KEY_VAULT_URI=not-used-offline

# ==========================================
# Document Intelligence
# NOT USED in offline mode (MarkItDown handles all extraction)
# ==========================================
# AZURE_DOC_INT_ENDPOINT=not-used-offline
# AZURE_DOC_INT_KEY=not-used-offline
# AZURE_DI_MAX_CONCURRENCY=3

# ==========================================
# Azure AI Search
# REQUIRED: Even in offline mode for index structure
# Use local search or mock credentials
# ==========================================
AZURE_SEARCH_SERVICE=localhost-search
AZURE_SEARCH_KEY=mock-key-for-offline
AZURE_SEARCH_INDEX=offline-index

# ==========================================
# Azure OpenAI
# NOT USED in offline mode (no embeddings or descriptions)
# ==========================================
# AZURE_OPENAI_ENDPOINT=not-used-offline
# AZURE_OPENAI_KEY=not-used-offline
# AZURE_OPENAI_API_KEY=not-used-offline
# AZURE_OPENAI_API_VERSION=2024-12-01-preview
# AZURE_OPENAI_EMBEDDING_DEPLOYMENT=not-used-offline
# AZURE_OPENAI_EMBEDDING_MODEL=not-used-offline
# AZURE_OPENAI_CHAT_DEPLOYMENT=not-used-offline

# ==========================================
# Azure Storage Account
# NOT USED in offline mode
# ==========================================
# AZURE_STORAGE_ACCOUNT=not-used-offline
# AZURE_STORAGE_ACCOUNT_KEY=not-used-offline

# ==========================================
# SCENARIO 5: Local Input → Local Artifacts (Offline)
# ==========================================
AZURE_INPUT_MODE=local
AZURE_LOCAL_GLOB=./documents/**/*

# Store artifacts locally
AZURE_ARTIFACTS_DIR=./offline_artifacts

# ==========================================
# Document Action Mode
# ==========================================
AZURE_DOCUMENT_ACTION=add
# Options: add, remove, removeall

# ==========================================
# Document Intelligence Extraction
# ==========================================
# NOT USED in offline mode - MarkItDown handles extraction
# EXTRACTION_METHOD=not-used-offline
# DI_BATCH_SIZE=not-used-offline
# DI_MAX_RETRIES=not-used-offline

# ==========================================
# PDF Processing
# ==========================================
# Page splitting works in offline mode (uses pypdf)
SPLIT_PDF_BY_PAGE=false
# Set to true if you want page-level chunks
# Note: Offline PDF extraction uses pypdf (lower quality than Azure DI)

# ==========================================
# Chunking Configuration
# ==========================================
# Offline: Standard chunking settings
CHUNKER_TARGET_TOKEN_COUNT=800
# Works same as online mode

# Standard overlap
CHUNKER_OVERLAP_TOKEN_COUNT=100

# Token-only chunking
CHUNKER_DISABLE_CHAR_LIMIT=true

# Cross-page overlap
CHUNKER_CROSS_PAGE_OVERLAP=true

# ==========================================
# Table Processing
# ==========================================
# Offline: MarkItDown extracts tables as markdown
TABLE_RENDER_MODE=markdown
# Only markdown supported in offline mode
# html rendering requires Azure DI

# Table summaries not available offline (requires OpenAI)
TABLE_SUMMARIES=false

# ==========================================
# Figure/Image Processing
# ==========================================
# Offline: No figure descriptions available
MEDIA_DESCRIBER_MODE=none
# Azure OpenAI not available in offline mode
# Figures are extracted but not described

# ==========================================
# Processing Options
# ==========================================
# Offline: No embeddings (requires Azure OpenAI)
AZURE_USE_INTEGRATED_VECTORIZATION=false

# ==========================================
# Offline Mode Limitations
# ==========================================
# ❌ No Azure Document Intelligence
#    - PDF extraction uses pypdf (lower quality)
#    - No bounding boxes
#    - No LaTeX equations
#    - Tables in markdown only
# ❌ No Azure OpenAI
#    - No embeddings
#    - No figure descriptions
#    - No table summaries
# ✅ What works:
#    - Text extraction (pypdf, MarkItDown)
#    - Office docs (requires LibreOffice)
#    - Markdown tables
#    - Chunking
#    - Local artifact storage

# ==========================================
# Performance Tuning
# ==========================================
AZURE_MAX_WORKERS=4
AZURE_INNER_ANALYZE_WORKERS=1
AZURE_UPLOAD_DELAY=0
AZURE_EMBED_BATCH_SIZE=0  # No embeddings
AZURE_UPLOAD_BATCH_SIZE=500

# ==========================================
# Office Document Processing
# SCENARIO: MarkItDown Only (Fully Offline)
# ==========================================
AZURE_OFFICE_EXTRACTOR_MODE=markitdown
AZURE_OFFICE_MAX_FILE_SIZE_MB=100
AZURE_OFFICE_VERBOSE=true

# REQUIRED: LibreOffice path for DOC/DOCX/PPTX processing
# Install LibreOffice from: https://www.libreoffice.org/download/
AZURE_OFFICE_LIBREOFFICE_PATH=/usr/bin/soffice  # Linux/Mac
# AZURE_OFFICE_LIBREOFFICE_PATH=C:\\Program Files\\LibreOffice\\program\\soffice.exe  # Windows

# Note: NO Azure Document Intelligence needed in this mode!
# All extraction is done locally using MarkItDown + LibreOffice

# ==========================================
# LIMITATIONS IN OFFLINE MODE:
# ==========================================
# ❌ No embeddings (AZURE_USE_INTEGRATED_VECTORIZATION=false)
# ❌ No figure descriptions (AZURE_MEDIA_DESCRIBER=none)
# ❌ No LaTeX equations (requires Azure DI premium)
# ❌ No bounding boxes (requires Azure DI)
# ✅ Text extraction works (MarkItDown)
# ✅ Tables work (Markdown format)
# ✅ Office docs work (requires LibreOffice)
# ✅ PDF extraction works (pypdf fallback)

# ==========================================
# TO USE THIS FILE:
# 1. Install LibreOffice:
#    - Linux: sudo apt-get install libreoffice
#    - Mac: brew install --cask libreoffice
#    - Windows: Download from libreoffice.org
# 2. Copy this file: cp envs/env.scenario5-offline.example .env
# 3. Update AZURE_OFFICE_LIBREOFFICE_PATH if needed
# 4. No Azure credentials needed!
# 5. Run: prepdocs --glob "documents/**/*"
# ==========================================

# ==========================================
# USE CASES FOR OFFLINE MODE:
# ==========================================
# - Air-gapped / secure environments
# - Development without Azure access
# - Cost optimization (no Azure fees)
# - Testing document extraction locally
# - Demos and prototyping
# ==========================================
