# ==========================================
# EXAMPLE ENVIRONMENT CONFIGURATION - DEFAULT AZURE SETUP
# ==========================================
#
# This is the DEFAULT configuration using Azure services.
# For alternative configurations, see:
#   - .env.chromadb.example (Fully offline with ChromaDB + Hugging Face)
#   - .env.cohere.example (Azure Search + Cohere embeddings)
#   - .env.hybrid.example (Azure Search + local Hugging Face embeddings)
#
# üìñ SETUP GUIDE: See SETUP_GUIDE.md for complete step-by-step instructions
# üìñ CONFIGURATION GUIDE: See docs/configuration_examples.md for all options
#
# QUICK START CHECKLIST:
# ‚òê 1. Copy this file to .env
# ‚òê 2. Create Azure resources (AI Search, Document Intelligence, OpenAI, Storage)
# ‚òê 3. Replace all placeholder values with your actual credentials
# ‚òê 4. Create input container (if using blob mode) or place files in ./documents/
# ‚òê 5. Run: ingestor --setup-index (creates the index)
# ‚òê 6. Run: ingestor --glob "documents/*.pdf" (process documents)
#
# ==========================================
# PLUGGABLE ARCHITECTURE
# ==========================================
# Mix and match vector stores and embeddings providers:
#
# Vector Stores:  azure_search (default) | chromadb (offline)
# Embeddings:     azure_openai (default) | huggingface | cohere | openai
#
# This file configures: Azure Search + Azure OpenAI (production default)
# ==========================================

# ==========================================
# Vector Store: Azure AI Search (Default)
# ==========================================
VECTOR_STORE_MODE=azure_search
AZURE_SEARCH_SERVICE=your-search-service
AZURE_SEARCH_INDEX=documents
AZURE_SEARCH_KEY=your-search-admin-key-here

# Or use direct endpoint:
# AZURE_SEARCH_ENDPOINT=https://your-search-service.search.windows.net

# ==========================================
# Embeddings: Azure OpenAI (Default)
# ==========================================
EMBEDDINGS_MODE=azure_openai
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.com/
AZURE_OPENAI_KEY=your-openai-key-here
AZURE_OPENAI_API_VERSION=2024-12-01-preview
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# For newer embedding models with configurable dimensions:
# AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-large
# AZURE_OPENAI_EMBEDDING_DIMENSIONS=1536

# For media descriptions (optional):
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o-mini

# Concurrency and retries
AZURE_OPENAI_MAX_RETRIES=3
AZURE_OPENAI_TIMEOUT=30

# Important: Set to false when using non-Azure-OpenAI embeddings
AZURE_USE_INTEGRATED_VECTORIZATION=true

# ==========================================
# Azure Service Principal Credentials (Optional)
# Required for Key Vault access and Azure AD authentication
# Get these from: Azure Portal ‚Üí Azure AD ‚Üí App Registrations
# ==========================================
# AZURE_TENANT_ID=your-tenant-id-here
# AZURE_CLIENT_ID=your-client-id-here
# AZURE_CLIENT_SECRET=your-client-secret-here

# ==========================================
# Key Vault Configuration (Optional)
# Store secrets in Azure Key Vault
# ==========================================
# KEY_VAULT_URI=https://your-keyvault.vault.azure.net/

# ==========================================
# Document Intelligence
# For PDF parsing, table extraction, figure detection
# Get these from: Azure Portal ‚Üí Document Intelligence resource
# ==========================================
AZURE_DOC_INT_ENDPOINT=https://your-docint.cognitiveservices.azure.com/
AZURE_DOC_INT_KEY=your-document-intelligence-key-here
AZURE_DI_MAX_CONCURRENCY=3


# ==========================================
# Azure Storage Account (Optional for blob mode)
# Required for blob mode (input/output) and blob artifacts
# Get these from: Azure Portal ‚Üí Storage Account ‚Üí Access keys
# ==========================================
# AZURE_STORAGE_ACCOUNT=your-storage-account
# AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key-here
# AZURE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your-storage-account;AccountKey=your-storage-account-key-here;EndpointSuffix=core.windows.net

# Container configuration (for blob mode):
# AZURE_STORAGE_CONTAINER=documents
# AZURE_ARTIFACTS_CONTAINER=artifacts

# ==========================================
# Input/Output Mode Configuration
# ==========================================
# Input: Where to read documents from
# Options: local, blob
INPUT_MODE=local
LOCAL_INPUT_GLOB=documents/**/*.pdf

# For blob input:
# INPUT_MODE=blob
# AZURE_STORAGE_CONTAINER=documents

# Output/Artifacts: Where to write artifacts (pages, chunks, images)
# Options: local, blob
ARTIFACTS_MODE=local
LOCAL_ARTIFACTS_DIR=./artifacts

# For blob artifacts:
# ARTIFACTS_MODE=blob
# AZURE_ARTIFACTS_CONTAINER=artifacts

# ==========================================
# Document Processing
# ==========================================
# Office document extraction mode
# Options: azure_di (Document Intelligence), markitdown (offline), hybrid (try DI, fallback to markitdown)
AZURE_OFFICE_EXTRACTOR_MODE=hybrid

# ==========================================
# Chunking Settings (Dynamic Adjustment)
# ==========================================
# The pipeline automatically adjusts chunking limits based on the
# embedding model's max_seq_length to prevent truncation.
#
# Generic parameter names (recommended):
CHUNKING_MAX_CHARS=2000
CHUNKING_MAX_TOKENS=500
CHUNKING_OVERLAP_PERCENT=10
CHUNKING_CROSS_PAGE_OVERLAP=false

# Azure-prefixed names also work (backward compatibility):
# AZURE_CHUNKING_MAX_CHARS=2000
# AZURE_CHUNKING_MAX_TOKENS=500
# AZURE_CHUNKING_OVERLAP_PERCENT=10

# ==========================================
# Media Description
# ==========================================
# Options: disabled, gpt4o
AZURE_MEDIA_DESCRIBER=disabled

# If enabled, requires AZURE_OPENAI_CHAT_DEPLOYMENT above

# ==========================================
# Table Rendering
# ==========================================
AZURE_TABLE_RENDER=markdown
AZURE_TABLE_SUMMARIES=false

# ==========================================
# Performance Settings
# ==========================================
AZURE_CHUNKING_MAX_WORKERS=4
AZURE_CHUNKING_MAX_IMAGE_CONCURRENCY=8
AZURE_CHUNKING_MAX_BATCH_UPLOAD_CONCURRENCY=5

# ==========================================
# Logging
# ==========================================
LOG_LEVEL=INFO
LOG_FILE_LEVEL=DEBUG
LOG_ARTIFACTS=true
LOG_USE_COLORS=true

# ==========================================
# Gradio UI (Optional)
# ==========================================
GRADIO_SHARE=false
GRADIO_SERVER_PORT=7860

# ==========================================
# IMPORTANT SECURITY NOTES
# ==========================================
# 1. NEVER commit the .env file to version control
# 2. Add .env to your .gitignore file
# 3. Keep backups of .env in a secure location
# 4. Rotate keys regularly
# 5. Use Azure Key Vault for production environments
# ==========================================
