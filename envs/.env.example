# ==========================================
# EXAMPLE ENVIRONMENT CONFIGURATION
# ==========================================
#
# üìñ SETUP GUIDE: See SETUP_GUIDE.md for complete step-by-step instructions
#
# QUICK START CHECKLIST:
# ‚òê 1. Copy this file to .env
# ‚òê 2. Create Azure resources (AI Search, Document Intelligence, OpenAI, Storage)
# ‚òê 3. Replace all placeholder values with your actual credentials
# ‚òê 4. Create input container (if using blob mode)
# ‚òê 5. Upload files to input container or local directory
# ‚òê 6. Run: python -m ingestor.cli --setup-index
# ‚òê 7. Run: python -m ingestor.cli
#
# CONTAINER CONFIGURATION (Two Approaches):
#
#   SIMPLE (RECOMMENDED):
#     Set AZURE_STORAGE_CONTAINER=my-base-name
#     Auto-generates: my-base-name-input, my-base-name-pages, my-base-name-chunks, etc.
#
#   EXPLICIT (Advanced):
#     Set AZURE_BLOB_CONTAINER_IN, AZURE_BLOB_CONTAINER_PREFIX, AZURE_BLOB_CONTAINER_OUT_*
#     Full control over each container name
#
# IMPORTANT NOTES:
#   ‚ö†Ô∏è  INPUT containers must be pre-created by YOU in Azure Storage
#   ‚úÖ OUTPUT containers are auto-created by the pipeline
#   üìÇ Use AZURE_ARTIFACTS_DIR to force local artifact storage (overrides blob mode)
#
# ==========================================

# ==========================================
# Azure Service Principal Credentials
# Required for Key Vault access and Azure AD authentication
# Get these from: Azure Portal ‚Üí Azure AD ‚Üí App Registrations
# ==========================================
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-client-id-here
AZURE_CLIENT_SECRET=your-client-secret-here

# ==========================================
# Key Vault Configuration (Optional)
# Store secrets in Azure Key Vault
# ==========================================
KEY_VAULT_URI=https://your-keyvault.vault.azure.net/

# ==========================================
# Document Intelligence
# For PDF parsing, table extraction, figure detection
# Get these from: Azure Portal ‚Üí Document Intelligence resource
# ==========================================
AZURE_DOC_INT_ENDPOINT=https://your-docint.cognitiveservices.azure.com/
AZURE_DOC_INT_KEY=your-document-intelligence-key-here
AZURE_DI_MAX_CONCURRENCY=3

# ==========================================
# Azure AI Search
# Index name MUST match your deployed index
# Get these from: Azure Portal ‚Üí AI Search resource
# ==========================================
AZURE_SEARCH_SERVICE=your-search-service
AZURE_SEARCH_KEY=your-search-admin-key-here
AZURE_SEARCH_INDEX=myproject-index

# ==========================================
# Azure OpenAI
# For embeddings (client-side) and figure descriptions
# Get these from: Azure Portal ‚Üí Azure OpenAI resource
# ==========================================
AZURE_OPENAI_ENDPOINT=https://your-openai.openai.azure.com/
AZURE_OPENAI_KEY=your-openai-key-here
AZURE_OPENAI_API_KEY=your-openai-key-here
AZURE_OPENAI_API_VERSION=2024-12-01-preview
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
AZURE_OPENAI_EMBEDDING_NAME=text-embedding-ada-002
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_MODEL_NAME=gpt-4o-mini
AZURE_OPENAI_MODEL=gpt-4o-mini

# Embedding dimensions (optional, for text-embedding-3-* models)
# AZURE_OPENAI_EMBEDDING_DIMENSIONS=1536

# Concurrency and retries
AZURE_OPENAI_MAX_RETRIES=3
AZURE_OPENAI_TIMEOUT=30

# ==========================================
# Azure Storage Account
# Required for blob mode (input/output) and blob artifacts
# Get these from: Azure Portal ‚Üí Storage Account ‚Üí Access keys
# ==========================================
AZURE_STORAGE_ACCOUNT=your-storage-account
AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key-here
AZURE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your-storage-account;AccountKey=your-storage-account-key-here;EndpointSuffix=core.windows.net

# SAS Token (optional, alternative to account key)
# AZURE_STORAGE_SAS_TOKEN=sv=2023-01-03&st=2024-01-01T00:00:00Z&se=2027-12-31T23:59:59Z...

# ==========================================
# Container Configuration (SIMPLE Approach - Recommended)
# ==========================================
# Set one base name, all containers auto-generated:
AZURE_STORAGE_CONTAINER=myproject

# This creates:
# - myproject-input       (for input documents - YOU create this)
# - myproject-pages       (for page data - auto-created)
# - myproject-chunks      (for chunk data - auto-created)
# - myproject-images      (for figures - auto-created)
# - myproject-citations   (for PDFs - auto-created)

# ==========================================
# Container Configuration (EXPLICIT Approach - Advanced)
# ==========================================
# Uncomment to use explicit container names:
# AZURE_BLOB_CONTAINER_PREFIX=myproject
# AZURE_BLOB_CONTAINER_IN=myproject-input
# AZURE_BLOB_CONTAINER_OUT_PAGES=pages
# AZURE_BLOB_CONTAINER_OUT_CHUNKS=chunks
# AZURE_BLOB_CONTAINER_OUT_IMAGES=images
# AZURE_BLOB_CONTAINER_CITATIONS=citations

# ==========================================
# Input/Output Mode Configuration
# ==========================================
# Input: Where to read documents from
# Options: local, blob
AZURE_INPUT_MODE=local

# Output/Artifacts: Where to write artifacts (pages, chunks, images)
# Options: local, blob
# NOTE: AZURE_ARTIFACTS_DIR overrides this - if set, artifacts go to local directory
AZURE_ARTIFACTS_MODE=local

# ==========================================
# Local Mode Configuration
# ==========================================
# For local input mode
AZURE_LOCAL_GLOB=data/**/*.pdf

# For local artifacts mode (or to override blob artifacts)
AZURE_ARTIFACTS_DIR=./artifacts

# ==========================================
# Document Processing
# ==========================================
# Document action
# Options: add, remove, removeall
DOCUMENT_ACTION=add

# Chunking
CHUNK_SIZE=1024
CHUNK_OVERLAP=128

# Embeddings
EMBEDDING_BATCH_SIZE=16

# Figure processing
ENABLE_FIGURE_DESCRIPTION=true
FIGURE_DESCRIPTION_MODEL=gpt-4o-mini

# Gradio UI
GRADIO_SHARE=false
GRADIO_SERVER_PORT=7860

# Logging
LOG_LEVEL=INFO

# ==========================================
# IMPORTANT SECURITY NOTES
# ==========================================
# 1. NEVER commit the .env file to version control
# 2. Add .env to your .gitignore file
# 3. Keep backups of .env in a secure location
# 4. Rotate keys regularly
# 5. Use Azure Key Vault for production environments
# ==========================================
